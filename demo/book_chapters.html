<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>Book Chapters</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript" src="../js/jquery-1.11.1.min.js"></script>
        <script type="text/javascript" src="../js/d3.3.5.5.min.js" charset="utf-8"></script>
        <script type="text/javascript" src="../keshif.js" charset="utf-8"></script>
        <link rel="stylesheet" href="../keshif.css"/ type="text/css">
        <link rel="stylesheet" href="../font-awesome/css/font-awesome.min.css">

        <script type="text/javascript" src="./js/demo.js" charset="utf-8"></script>
        <link rel="stylesheet" href="./css/style.css"/ type="text/css">

        <script type="text/javascript">
            var sortProps = function(s){
                switch(s){
                    case 'Number & Quantity = 1.0': return 1;
                    case 'Shape & Space = 0.5': return 2;
                    case 'Shape & Space = 1.0': return 3;
                    case 'Function = 0.5': return 4;
                    case 'Function = 1.0': return 5;
                    case 'Chance & Data = 1.0': return 6;
                    case 'Arrangement = 1.0': return 7;
                }
            };
            function pad(num, size) {
                var s = num+"";
                while (s.length < size) s = "0" + s;
                return s;
            }

            google.setOnLoadCallback(function(){
                browser = new kshf.Browser({
                    domID: "#chart_div",
                    barChartWidth: 90,
                    leftPanelLabelWidth: 230,
                    source: {
                        gdocId: '1nqZTWMr2xsYawyQlT6zjwV4pW5ZKRiQPd24jOkNJVYM',
                        sheets: [ {name:"Book Chapters"} ]
                    },
                    readyCb: function(browser){
                        //browser.summaries_by_name.Properties.setHeightRow_attrib(30);
                    },
                    facets: [
                        {
                            title: "Domain Properties",
                            attribMap: function(d){
                                var r=[];
                                if(d.data['Number & Quantity']===1) r.push('Number & Quantity = 1.0');
                                if(d.data['Shape & Space']===1) r.push('Shape & Space = 1.0');
                                if(d.data['Shape & Space']===0.5) r.push('Shape & Space = 0.5');
                                if(d.data['Function']===1) r.push('Function = 1.0');
                                if(d.data['Function']===0.5) r.push('Function = 0.5');
                                if(d.data['Chance & Data']===1) r.push('Chance & Data = 1.0');
                                if(d.data['Arrangement']===1) r.push('Arrangement = 1.0');
                                return r;
                            },
                            sortingOpts: [{
                                func: function(a,b){
                                    return sortProps(a.data[0]) - sortProps(b.data[0]);
                                }
                            }
                            ]
                        },{
                            title: "Modeling / Formulating"
                        },{
                            title: "Manipulating / Transforming"
                        },{
                            title: "Inferring / Drawing Conclusions"
                        },{
                            title: "Communicating"
                        },
                    ],
                    itemDisplay: {
                        sortColWidth: 45,
                        detailsToggle: "zoom",
                        sortingOpts: [ {
                            name: 'id', inverse: true,
                            value: function(d){ return d.data.id},
                            label: function(d){ return d.data.Code+pad(d.data.id,3); }
                        } ],
                        textSearch: "Name",
                        recordView: function(d){
                            var str="";
                            str+="<div class='chapterTitle'>"+d.data.Name+"</div>";
                            str+="<span class='numTable'>";
                                str+="<span class='act_mf act_"+d.data["Modeling / Formulating"]+"'>M/F</span>"
                                str+="<span class='act_tf act_"+d.data["Manipulating / Transforming"]+"'>M/T</span>"
                                str+="<span class='act_id act_"+d.data["Inferring / Drawing Conclusions"]+"'>I/D</span>"
                                str+="<span class='act_c  act_"+d.data["Communicating"]+"'>C</span>"
                            str+="</span>";
                            str+="<span class='attrGroup'>Domains:</span> <span class='attrList'>";
                            if(d.data['Number & Quantity']){
                                str+="Number & Quantity ["+d.data['Number & Quantity']+"], ";
                            }
                            if(d.data['Shape & Space']){
                                str+="Shape & Space ["+d.data['Shape & Space']+"], ";
                            }
                            if(d.data['Function']){
                                str+="Function ["+d.data['Function']+"], ";
                            }
                            if(d.data['Arrangement']){
                                str+="Arrangement ["+d.data['Arrangement']+"], ";
                            }
                            if(d.data['Chance & Data']){
                                str+="Chance & Data ["+d.data['Chance & Data']+"], ";
                            }
                            str+="</span>";
                            return str;
                        }
                    }
                });
            });
        </script>
        <style>
            #chart_div {
                width: 1000px;
                height: 690px;
            }
            .chapterTitle{
                font-weight: 700;
                text-decoration: underline;
                font-size: 1.1em;
            }
            .attrGroup{
                font-weight: 300;
                font-size: 0.9em;
            }
            .attrList{
                font-size: 0.9em;
                font-weight: 300;
                color: gray;
            }
            .listItem{
                border-top: solid 1px lightgray;
                margin-top: 3px;
            }
            .numTable{
                float: right;
            }
            .numTable span{
                display: inline-block;
                width: 45px;
                border-left: solid 1px gray;
                border-right: solid 1px gray;
                padding: 0px 3px;
                text-align: center;
                font-size: 0.8em;
                color: gray;
            }
            .act_0:after{
                content: ":0"; color:;
            }
            .act_1:after{
                content: ":1";
            }
            .act_2:after{
                content: ":2";
            }
            .act_3:after{
                content: ":3";
            }
            .act_4:after{
                content: ":4";
            }
            .act_0{
                background-color: rgba(255, 204, 204,0.1);
            }
            .act_1{
                background-color: rgba(255, 204, 204,0.4);
            }
            .act_2{
                background-color: rgba(255, 204, 204,0.6);
            }
            .act_3{
                background-color: rgba(255, 204, 204,0.8);
            }
            .act_4{
                background-color: rgba(255, 204, 204,1);
            }

        </style>
    </head>
    <body>
        <div class="contents"><div id="chart_div"></div></div>
    </body>
</html>
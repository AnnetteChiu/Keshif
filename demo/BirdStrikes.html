<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Bird Strikes</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="../js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="../js/d3.3.5.5.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="../keshif.js" charset="utf-8"></script>
    <link rel="stylesheet" href="../keshif.css"/ type="text/css">
    <link rel="stylesheet" href="../font-awesome/css/font-awesome.min.css">

    <script type="text/javascript" src="./js/demo.js" charset="utf-8"></script>
    <link rel="stylesheet" href="./css/style.css"/ type="text/css">

    <script type="text/javascript">
var flightDateFormat = d3.time.format("%-m/%-d/%y");

google.setOnLoadCallback(function(){
  resizeBrowser(300,70);
  $(window).resize(function() {
    resizeBrowser(300,70);
    browser.updateLayout();
  });

  browser = new kshf.Browser({
    domID: "#chart_div",
    barChartWidth: 130,
    itemName: "Bird strikes near airports in the U.S.",
    leftPanelLabelWidth: 150,
    rightPanelLabelWidth: 200,
    middlePanelLabelWidth: 200,
    source: {
      dirPath: "./data/",
      fileType: 'json', 
      tables: "voyager_birdstrikes"
    },
    loadedCb: function(){
      kshf.dt.voyager_birdstrikes.forEach(function(d){
        d.data.Date = flightDateFormat.parse(d.data.Flight_Date.split(" ")[0]);
      });
    },
    readyCb: function(){
      browser.summaries_by_name.Flight_Date.destroy_full();
      browser.summaries_by_name.id.destroy_full();
    },
    summaries: [
      {name: "Wildlife Size", value: "Wildlife__Size"},
      {name: "Wildlife Species", value: "Wildlife__Species"},

      {name: "Time of Day", value: "When__Time_of_day"},
      {name: "Phase of Flight", value: "When__Phase_of_flight"},

      {name: "State", value: "Origin_State", panel: "middle", collapsed: true},
      {name: "Airport", value: "Airport__Name", panel: "middle"},

      {name: "Airline", value: "Aircraft__Airline_Operator", panel: "middle"},
      {name: "Aircarft Make & Model", value: "Aircraft__Make_Model", collapsed: true, panel: "middle"},
      {name: "Speed of Aircraft", value: "Speed_IAS_in_knots", unitName: "kn", panel: "right"},

      {name: "Amount of Damage", value: "Effect__Amount_of_damage", panel: "right"},
      {name: "Cost (Total)", value: "Cost__Total_$", unitName: "$", panel: "right"},
      {name: "Cost (Other)", value: "Cost__Other", unitName: "$", panel: "right", collapsed: true},
      {name: "Cost (Repair)", value: "Cost__Repair", unitName: "$", panel: "right", collapsed: true},
      {name: "Date", panel: "bottom"}
//      {name: "", value: ""},
//      {name: "", value: ""},
    ],
  });
});
    </script>
    <style>
#chart_div {
  width: 890px;
  height: 480px;
}
    </style>
  </head>
  <body>
    <div class="contents"><div id="chart_div"></div></div>
  </body>
</html>